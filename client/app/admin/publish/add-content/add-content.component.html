<div class="course-form" aria-label="syllabus">
  <legend>chapters</legend>
  <br>
  <mat-tab-group>
    <mat-tab *ngFor="let chapter of course.content.chapters; let i = index">
      <ng-template mat-tab-label>
        {{i+1}}-
        <input matInput [(ngModel)]="chapter.title">
      </ng-template>
      <legend>lessons</legend>
      <mat-tab-group>

        <mat-tab *ngFor="let lesson of chapter.lessons; let j = index">
          <ng-template mat-tab-label>
            {{i+1}}.{{j+1}}-
            <input matInput [(ngModel)]="lesson.title">
          </ng-template>
          <quill-editor [(ngModel)]="lesson.content" theme="snow"></quill-editor>
          <br>
          <a *ngIf="lesson.contentFile" href="{{lesson.contentFile}}" target="_blank">view file</a>
          <div class="buffer"></div>
          <div *ngIf="!isLoading" class="form_line">
            <div class="form_controls">
              <div class="upload_button_holder">
                <label class="upload_button" for="fileupload">choose file</label>
                <input type="file" id="fileupload" #fileInput ng2FileSelect [style.display]="'none'" [uploader]="uploader" (change)="previewImage(i,j)"
                  multiple />
              </div>
            </div>
          </div>
          <div *ngIf="isLoading" class="loader">loading..</div>
          <p>{{fileUrl}}</p>
          <div *ngIf="!isLoading" class="form_line">
            <div class="form_controls">
              <div class="upload_button_holder">
                <label class="upload_button" for="fileupload">choose image</label>
                <input type="file" id="fileupload" #fileInput ng2FileSelect [style.display]="'none'" [uploader]="uploader" (change)="previewImage(i,j)"
                  multiple />
              </div>
            </div>
          </div>
          <img src="{{lesson.imagePreview}}">
          <img *ngIf="!lesson.imagePreview" src="{{lesson.image}}">
          <br>
          <br>
          <button class="btn" [disabled]="!fileUrl && !imgPreview" *ngIf="!isLoading" (click)="uploadFile()">upload</button>
          <br>
        </mat-tab>
        <mat-tab>
          <ng-template mat-tab-label>
            <input matInput (focus)="removePlaceholder($event)" [(ngModel)]="lessonName" />
            <button class="btn" (click)="addLesson(i)">
              <i class="fa fa-plus"></i>
            </button>
          </ng-template>
        </mat-tab>

      </mat-tab-group>
    </mat-tab>
    <mat-tab>
      <ng-template mat-tab-label>
        <input matInput (focus)="removePlaceholder($event)" [(ngModel)]="chapterName" />
        <button class="btn" (click)="addChapter()">
          <i class="fa fa-plus"></i>
        </button>
      </ng-template>
    </mat-tab>
  </mat-tab-group>

</div>
